<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Exercises chapter 14</title>
	<style>
		html, body {
			height: 100%;
		}
	</style>
</head>
<body>
	<div id="content"></div>
	<script>
		(function () {
			var map = {
				td: [3, '<table><tbody><tr>', '</tr></tbody></table>'],
				th: [3, '<table><tbody><tr>', '</tr></tbody></table>'],
				tr: [2, '<table><thead>', '</thead></table>'],
				option: [1, '<select multiple="multiple">', '</select>'],
				optgroup: [1, '<select multiple="multiple">', '</select>'],
				legend: [1, '<fieldset>', '</fieldset>'],
				thead: [1, '<table>', '</table>'],
				tbody: [1, '<table>', '</table>'],
				tfoot: [1, '<table>', '</table>'],
				colgroup: [1, '<table>', '</table>'],
				caption: [1, '<table>', '</table>'],
				col: [2, '<table><tbody></tbody><colgroup>',
					'</colgroup></table>'],
				link: [3, '<div></div><div>', '</div>']
			};
			this.generateNodes = function (htmlString, fragment) {
				var tagName = htmlString.match(/<(\w+)>/)[1];
				var mapEntry = tagName ? map[tagName] : null;

				if (!mapEntry) {
					mapEntry = [0, ' ', ' '];
				}

				var div = document.createElement('div');

				div.innerHTML = mapEntry[1] + htmlString + mapEntry[2];

				var childrenCount = mapEntry[0];

				while (childrenCount--) {
					div = div.lastChild;
				}
				while (div.firstChild) {
					fragment.append(div.firstChild);
				}
			};
		})();
		window.onload = function () {
			var container = document.getElementById('content');

			function setTemplate (templateId) {
				var content =
					document.getElementById(templateId).innerHTML;
				var fragment = document.createDocumentFragment();

				generateNodes(content, fragment);
				while (container.firstChild) {
					container.removeChild(container.firstChild);
				}
				container.append(fragment);
			}

			container.addEventListener('click', function () {
				var elem = event.target;
				var tagName = elem.nodeName.toLowerCase();

				if (tagName === 'img' || tagName === 'p') {
					while (elem.parentNode) {
						if (elem.id === 'content-one') {
							setTemplate('template2');
							break;
						} else if (elem.id === 'content-two') {
							setTemplate('template1');
							break;
						}
						elem = elem.parentNode;
					}
				}
			}, false);

			setTemplate('template1');
		};
	</script>
	<script id="template1" type="template/html">
		<style>
			html, body {
				height: 100%;
			}

			.leftSide, .rightSide {
				height: 100%;
				margin: 0;
			}

			.leftSide {
				padding: 10px;
			}

			.rightSide {
				width: calc(100% - 270px);
				float: right;
			}

			.rightSide p {
				margin: 0;
			}
		</style>
		<div id="content-one">
			<div class="rightSide">
				<p>Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.</p>
			</div>
			<figure class="leftSide">
				<img src="../images/alex-michaelsen-1136487-unsplash.jpg">
			</figure>
		<div>
	</script>
	<script id="template2" type="template/html">
		<style>
			figure {
				margin: 0;
				float: right;
			}
		</style>
		<div id="content-two">
			<figure class="leftSide">
				<img src="../images/right_image.png">
			</figure>
			<div class="rightSide">
				<p>Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.
				Lorem ipsum dolor sit amet consectetur adipisicing elit.
				Magnam quos expedita asperiores. Eligendi eos ad, enim,
				temporibus labore cumque odit voluptas ipsa aspernatur
				incidunt facilis repellat obcaecati vitae facere deserunt.</p>
			</div>
		</div>
	</script>
</body>
</html>